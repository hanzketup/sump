<!DOCTYPE html>
<html lang="">
  <head>

    <!-- Meta -->
    <title> Sump Filtering </title>
    <meta name="description" content="">

    <!-- Theme color for chrome mobile -->
    <meta name="theme-color" content="#">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

    <!-- External -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.11/handlebars.min.js"></script>

    <!-- Local -->
    <link href="src/css/global.css" rel="stylesheet" type="text/css">
    <script src="src/js/sump.js"></script>

  </head>
  <body>


    <div class="selector inter-selector">
    <div class="filter inter-filter list-item">
      <p style="flex-basis:4%;"><input id="all" type="checkbox"></input></p>
      <p style="flex-basis:64%;"><span>Name</span><input id="usr" type="text" placeholder="All"></p>
      <p style="flex-basis:16%;"><span>Phone</span><input id="phn" type="text" placeholder="All"></p>
      <p style="flex-basis:16%;"><span>Enrolled</span><input id="enrl" type="text" placeholder="All"></p>
    </div>
    <div class="list" id="list">
      <!-- Generated list items will appear here -->
    </div>

    <!-- Generate test data -->
    <script id="template" type="text/x-handlebars-template">
      <div class="list-item target">
        <p style="flex-basis:4%;"><input type="checkbox" unchecked class="inter-selector-check"></input></p>
        <p style="flex-basis:64%;" data-username="{{username}}">{{username}}</p>
        <p style="flex-basis:16%;" data-phone="{{phone}}">{{phone}}</p>
        <p style="flex-basis:16%;" data-enrolled="{{enrolled}}">{{enrolled}}</p>
      </div>
    </script>
    <script src="src/js/data.js"></script>
    <script src="src/js/generate.js"></script>

    <!-- Initialize sump -->
    <script>

      sump.init({
        includeChildren:true,
        useCheckboxes: true,
        lazy:false,
        silent:false,
        filters: [
          {
            selector: 'phone',
            id: 'phn',
            match: '^{}+'
          },
          {
            selector: 'username',
            id: 'usr',
            match: '^{}+'
          },
          {
            selector: 'enrolled',
            id: 'enrl',
            match: '^{}+'
          }
        ]
      })

      sump.onFilterChange = () => {
        console.log(sump.getMatchedTargets())
      }

      /*
      sump.target_enable = el => {
        el.style.background = "#55efc4"
      }

      sump.target_disable = el => {
        el.style.background = "#ff7675"
      }
      */

    </script>

  </body>
</html>
